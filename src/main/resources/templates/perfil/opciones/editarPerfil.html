<script>
	function agregarInstrumento(button) {
		var select = button.previousSibling.previousSibling;
		var optionSeleccionada = select.options[select.selectedIndex].value;
		select.remove(select.selectedIndex);

		var nuevoInstrumentoAgregado = document.createElement("input");
		nuevoInstrumentoAgregado.type = "checkbox";
		nuevoInstrumentoAgregado.checked = true;
		nuevoInstrumentoAgregado.name = "instrumentos";
		nuevoInstrumentoAgregado.id = optionSeleccionada;
		nuevoInstrumentoAgregado.value = optionSeleccionada;
		nuevoInstrumentoAgregado.hidden = "hidden";

		var label = document.createElement("label");
		label.htmlFor = optionSeleccionada;
		label.className = "instrumentoLabel";
		label.innerHTML = optionSeleccionada;
		label.onclick = function() {
			label.remove();
			nuevoInstrumentoAgregado.remove();
			var optionReset = document.createElement("option");
			optionReset.value = optionSeleccionada;
			optionReset.text = optionSeleccionada;
			select.insertBefore(optionReset, select.options[0]);
		};

		document.getElementById("divInstrumentos").append(
				nuevoInstrumentoAgregado);
		document.getElementById(optionSeleccionada).after(label);
	}
</script>
<div class="container d-flex justify-content-center">
	<div class="row d-flex justify-content-center">
		<div class="col-8 form">
			<div class="pt-3">
				<h2>Editar Perfil</h2>
			</div>
			<form method="post" action="/editarPerfil"
				enctype="multipart/form-data">

				<div class="form-group p-2">
					<label for="file">Foto de perfil</label> <input type="file"
						class="form-control" id="file" name="file">

				</div>


				<div class="form-group p-2">
					<label for="nombreUsuario">Nombre de usuario</label> <input
						type="text" class="form-control" id="nombre" name="nombre"
						placeholder="Nuevo nombre de usuario...">

				</div>


				<div class="form-group p-2">
					<label for="apellidos">Apellidos</label> <input type="text"
						class="form-control" id="apellidos" name="apellidos"
						placeholder="Nuevos apellidos...">
				</div>


				<div class="form-group p-2">
					<label for="edad">Edad</label> <input type="date"
						class="form-control" id="edad" name="edad">
				</div>
				
				<div class="form-group p-2">
					<label for="ciudad">Ciudad</label> <input type="date"
						class="form-control" id="ciudad" name="edad">
				</div>


				<div class="form-group p-2">
					<label for="descripcion">Descripción:</label>
					<textarea id="descripcion" maxlength="150" style="resize: none"
						onkeyup="validarLimite(this)"
						placeholder="Descripci�n de tu perfil de usuario..." cols="50"
						rows="5" name="descripcion"></textarea>
					<div class="row  p--1 d-flex justify-content-end">
						<span class=" contador ">0/150</span>
					</div>
				</div>


				<div class="form-group p-2">
					<label for="listaInstrumentos">Lista de Instrumentos:</label> <select
						id="instrumentos">
						<option th:each="instrumento : 	${instrumentos}"
							th:value="${instrumento.nombre}" th:text="${instrumento.nombre}">
					</select> <input type="button" class="btn btn-outline-danger"
						id="botonAgregarInstrumento" onclick="agregarInstrumento(this)"
						value="+">
					<div class="d-flexbox" id="divInstrumentos" style="height: auto;width: 25em;"></div>
				</div>


				<div class="form-group p-2 text-center">
					<input type="submit" class="btn btn-dark" value="Guardar">
				</div>
			</form>
		</div>
	</div>
</div>